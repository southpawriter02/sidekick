# Sidekick v0.4.3 Changelog — Snippet Pocket

> **Release Date:** 2026-02-04  
> **Phase:** Navigation & Productivity (v0.4.x)

---

## Summary

This release adds a **multi-slot code clipboard** called the Snippet Pocket. Save up to 10 code snippets for quick reuse across your session.

---

## New Features

### ✂️ Snippet Pocket

- **10 Numbered Slots:** Save code snippets to slots 0-9
- **Push/Pop:** New snippets push older ones down
- **Source Tracking:** Remembers file path and line range
- **Language Hints:** Captures file extension for syntax awareness
- **Persistent Storage:** Snippets survive IDE restarts (`sidekick-snippets.xml`)

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `Ctrl+Shift+C` | Capture selection to snippet pocket |
| `Ctrl+Shift+V` | Show snippet pocket popup |

---

## Components Added

### Models (`SnippetModels.kt`)

| Type | Description |
|------|-------------|
| `Snippet` | Captured code with metadata (file, lines, language) |
| `SnippetPocket` | Container with add/get/set/clear operations |
| `SnippetExport` | Import/export format with version |
| `SnippetResult` | Sealed class for operation outcomes |

### Service (`SnippetService.kt`)

| Method | Description |
|--------|-------------|
| `captureSelection()` | Capture to next available slot |
| `captureToSlot()` | Capture to specific slot |
| `getSnippet()` | Get snippet from slot |
| `pasteSnippet()` | Copy to system clipboard |
| `clearSlot()` / `clearAll()` | Clear slot(s) |
| `exportSnippets()` / `importSnippets()` | Import/export |

### Actions (`SnippetActions.kt`)

| Action | Description |
|--------|-------------|
| `CaptureSnippetAction` | Capture selection |
| `PasteSnippetAction` | Paste from specific slot |
| `ShowSnippetPocketAction` | Show popup selector |
| `ClearSnippetPocketAction` | Clear all snippets |
| `CaptureToSlotAction` | Capture to specific slot |

---

## Snippet Metadata

Each snippet tracks:
- **Content:** The captured text
- **Language:** File extension (kt, java, py, etc.)
- **Source:** Original file path
- **Lines:** Line range in source file
- **Saved At:** Capture timestamp
- **Label:** Optional user label

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/navigation/snippets/SnippetModels.kt`
- `src/main/kotlin/com/sidekick/navigation/snippets/SnippetService.kt`
- `src/main/kotlin/com/sidekick/navigation/snippets/SnippetActions.kt`
- `src/test/kotlin/com/sidekick/navigation/snippets/SnippetModelsTest.kt`
- `src/test/kotlin/com/sidekick/navigation/snippets/SnippetServiceTest.kt`

### Modified Files
- `src/main/resources/META-INF/plugin.xml` — Added service and actions

---

## Verification

```bash
./gradlew test --tests "com.sidekick.navigation.snippets.*"
# 64 tests passing
```

---

## What's Next

- **v0.4.4:** Recent Files Grid — Visual file browser with preview
- **v0.4.5:** Copy as Markdown — Syntax-highlighted code copying
