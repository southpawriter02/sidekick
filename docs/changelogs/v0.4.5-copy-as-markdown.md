# Sidekick v0.4.5 Changelog â€” Copy as Markdown

> **Release Date:** 2026-02-04  
> **Phase:** Navigation & Productivity (v0.4.x)

---

## Summary

This release adds **Copy as Markdown** â€” format code selections as syntax-highlighted markdown code blocks for documentation, chat, or issue tracking.

---

## New Features

### ðŸ“‹ Copy as Markdown

- **Quick Copy:** `Ctrl+Shift+M` with default formatting
- **Options Dialog:** Customize output per copy
- **Minimal Mode:** Code-only, no metadata
- **Language Mapping:** Extension-to-language hint conversion
- **Collapsible:** Wrap in `<details>` for long blocks
- **Line Numbers:** Optional numbered lines with accurate start positions

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `Ctrl+Shift+M` | Copy as Markdown |

---

## Components Added

### Models (`MarkdownCopyModels.kt`)

| Type | Description |
|------|-------------|
| `MarkdownCopyOptions` | Formatting configuration |
| `MarkdownCode` | Formatted output with metadata |
| `MarkdownFormat` | GitHub, GitLab, HTML Extended |
| `MarkdownPreset` | Quick, Standard, Detailed, Collapsible |
| `MarkdownCopyResult` | Operation outcome sealed class |

### Actions (`CopyAsMarkdownAction.kt`)

| Action | Description |
|--------|-------------|
| `CopyAsMarkdownAction` | Quick copy with defaults |
| `CopyAsMarkdownWithOptionsAction` | Copy with dialog |
| `CopyAsMarkdownMinimalAction` | Code-only copy |
| `CopyAsMarkdownCollapsibleAction` | Wrapped in details |
| `CopyAsMarkdownWithLinesAction` | With line numbers |

---

## Formatting Options

| Option | Description |
|--------|-------------|
| `includeFilePath` | Show file name above code block |
| `includeLineNumbers` | Prefix lines with numbers |
| `includeLanguage` | Add language hint to fence |
| `wrapInDetails` | Wrap in `<details>` HTML |
| `maxLines` | Truncate long selections |
| `startLineNumber` | Accurate line numbering from selection |

---

## Language Mapping

Common extensions are mapped to markdown hints:

| Extension | Language |
|-----------|----------|
| `kt`, `kts` | `kotlin` |
| `java` | `java` |
| `py` | `python` |
| `js`, `mjs` | `javascript` |
| `ts`, `tsx` | `typescript` |
| `cs` | `csharp` |
| `sh`, `bash`, `zsh` | `bash` |

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/navigation/markdown/MarkdownCopyModels.kt`
- `src/main/kotlin/com/sidekick/navigation/markdown/CopyAsMarkdownAction.kt`
- `src/test/kotlin/com/sidekick/navigation/markdown/MarkdownCopyModelsTest.kt`

### Modified Files
- `src/main/resources/META-INF/plugin.xml` â€” Added 3 actions

---

## Verification

```bash
./gradlew test --tests "com.sidekick.navigation.markdown.*"
# 57 tests passing
```

---

## What's Next

- **v0.4.6+:** Additional navigation features as designed
