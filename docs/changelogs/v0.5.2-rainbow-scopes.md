# Sidekick v0.5.2 Changelog â€” Rainbow Scopes

> **Release Date:** 2026-02-04  
> **Phase:** Visual Enhancements (v0.5.x)

---

## Summary

This release adds **Rainbow Scopes** â€” background tinting for nested code blocks to visually distinguish nesting levels.

---

## New Features

### ðŸŒˆ Rainbow Scopes

- **Automatic Highlighting:** Background tint based on nesting depth
- **4 Color Schemes:** Warm, Cool, Monochrome, Neon
- **Scope Detection:** Classes, methods, loops, conditionals, lambdas, try-catch
- **Configurable Opacity:** From subtle (0.03) to vivid (0.12)
- **Language Exclusions:** Skip specific languages

---

## Components Added

### Models (`RainbowScopeModels.kt`)

| Type | Description |
|------|-------------|
| `RainbowScopeConfig` | Feature configuration |
| `ScopeColorScheme` | 4 color schemes (Warm/Cool/Monochrome/Neon) |
| `ScopeType` | 7 scope types (Class/Method/Block/etc.) |
| `CodeScope` | Detected scope with range and level |
| `ScopeDetectionResult` | Operation outcome sealed class |
| `ScopeStats` | File-level statistics |

### Service (`RainbowScopeService.kt`)

| Feature | Description |
|---------|-------------|
| Scope Detection | PSI-based analysis |
| Config Persistence | Per-project settings |
| Stats Calculation | Nesting statistics |

### Highlighter (`RainbowScopeHighlighter.kt`)

| Component | Description |
|-----------|-------------|
| `RainbowScopeHighlighter` | Editor markup integration |
| `ToggleRainbowScopesAction` | Enable/disable |
| `SelectScopeSchemeAction` | Choose scheme |
| `ShowCurrentScopeAction` | Show scope at cursor |
| `ShowScopeStatsAction` | File statistics |

---

## Color Schemes

| Scheme | Description |
|--------|-------------|
| **Warm** | Reds, oranges, yellows (default) |
| **Cool** | Blues, purples, cyans |
| **Monochrome** | Grayscale for minimal distraction |
| **Neon** | Bright, vivid colors |

---

## Scope Types Detected

- Class, Method, Block
- Lambda, Loop, Conditional
- Try/Catch

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/visual/scopes/RainbowScopeModels.kt`
- `src/main/kotlin/com/sidekick/visual/scopes/RainbowScopeService.kt`
- `src/main/kotlin/com/sidekick/visual/scopes/RainbowScopeHighlighter.kt`
- `src/test/kotlin/com/sidekick/visual/scopes/RainbowScopeModelsTest.kt`

### Modified Files
- `src/main/resources/META-INF/plugin.xml` â€” Service + 4 actions

---

## Verification

```bash
./gradlew test --tests "com.sidekick.visual.scopes.*"
# 52 tests passing
```

---

## What's Next

- **v0.5.3:** Method Separators (visual lines between methods)
