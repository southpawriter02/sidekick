# Sidekick v0.8.2 Changelog â€” Provider Abstraction

> **Release Date:** 2026-02-06  
> **Phase:** LLM Integration (v0.8.x)

---

## Summary

This release adds **Provider Abstraction** â€” a unified API layer for multiple LLM backends.

---

## New Features

### ðŸ”„ Unified Provider Interface

- **LlmProvider Interface:** Common API for all backends
- **Multiple Backends:** Ollama and LM Studio implementations
- **Provider Manager:** Central service for provider lifecycle
- **Selection Strategies:** First available, lowest latency, round-robin, preferred

### Supported Providers

| Provider | Type | Status |
|----------|------|--------|
| Ollama | Local | âœ… Implemented |
| LM Studio | Local | âœ… Implemented |
| OpenAI | Cloud | ðŸ”® Future |
| Anthropic | Cloud | ðŸ”® Future |

### Unified API

| Method | Description |
|--------|-------------|
| `listModels()` | List available models |
| `chat(request)` | Chat completion |
| `streamChat(request)` | Streaming completion |
| `embed(text)` | Generate embeddings |
| `checkHealth()` | Health check |

### Selection Strategies

| Strategy | Description |
|----------|-------------|
| FIRST_AVAILABLE | Use first healthy provider |
| LOWEST_LATENCY | Use provider with fastest response |
| ROUND_ROBIN | Rotate between providers |
| PREFERRED | Use preferred with fallback |

---

## Components Added

### Models (`ProviderModels.kt`)

| Type | Description |
|------|-------------|
| `LlmProvider` | Provider interface |
| `ProviderType` | Provider type enum |
| `UnifiedModel` | Cross-provider model |
| `UnifiedChatRequest` | Chat request |
| `UnifiedMessage` | Chat message |
| `UnifiedChatResponse` | Chat response |
| `AgentTool` | Tool definition |
| `ToolCallRequest` | Tool call request |
| `ToolResult` | Tool execution result |
| `ProviderHealth` | Health status |

### Manager (`ProviderManager.kt`)

| Feature | Description |
|---------|-------------|
| Provider Registration | Add/remove providers |
| Active Provider | Get/set active |
| Selection Strategy | Configurable selection |
| Health Monitoring | Check all providers |

### Providers

| File | Description |
|------|-------------|
| `LmStudioLlmProvider.kt` | LM Studio adapter |
| `OllamaLlmProvider.kt` | Ollama adapter |

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/llm/provider/ProviderModels.kt`
- `src/main/kotlin/com/sidekick/llm/provider/ProviderManager.kt`
- `src/main/kotlin/com/sidekick/llm/provider/LmStudioLlmProvider.kt`
- `src/main/kotlin/com/sidekick/llm/provider/OllamaLlmProvider.kt`
- `src/test/kotlin/com/sidekick/llm/provider/ProviderModelsTest.kt`
- `src/test/kotlin/com/sidekick/llm/provider/ProviderManagerTest.kt`

---

## Test Coverage

| Test Class | Tests | Coverage |
|------------|-------|----------|
| `ProviderModelsTest` | 40+ | All models, enums, factories |
| `ProviderManagerTest` | 30+ | State, providers, strategies |

---

## API Reference

### Get Provider
```kotlin
val manager = ProviderManager.getInstance()
val provider = manager.getActiveProvider()
```

### Chat
```kotlin
val request = UnifiedChatRequest.simple("llama-3.1", "Hello!")
val response = manager.chat(request)
```

### With Tools
```kotlin
val tool = AgentTool.simple("read_file", "Read a file", "path" to "File path")
val request = UnifiedChatRequest(model = "llama-3.1", messages = messages, tools = listOf(tool))
```

---

## Verification

```bash
./gradlew test --tests "com.sidekick.llm.provider.*"
# All tests passing
```
