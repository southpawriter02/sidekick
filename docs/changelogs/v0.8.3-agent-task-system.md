# Sidekick v0.8.3 Changelog â€” Agent Task System

> **Release Date:** 2026-02-06  
> **Phase:** LLM Integration (v0.8.x)

---

## Summary

This release adds **Agent Task System** â€” task planning, execution, and tool use.

---

## New Features

### ğŸ¤– Agent Task Execution

- **Task Types:** 10 built-in task types (explain, refactor, fix bug, etc.)
- **Task Lifecycle:** Pending â†’ Planning â†’ Executing â†’ Completed/Failed
- **Constraints:** Control what the agent can do
- **Events:** Step-by-step progress tracking

### ğŸ”§ Built-in Tools

| Tool | Description | Destructive |
|------|-------------|-------------|
| `read_file` | Read file contents | No |
| `write_file` | Write/create file | Yes |
| `edit_file` | Replace text in file | Yes |
| `list_files` | List directory contents | No |
| `search_code` | Search for code patterns | No |
| `get_symbol_info` | Get symbol information | No |
| `get_file_outline` | Get file structure | No |
| `run_command` | Run shell command | Yes |

### Task Types

| Type | Description |
|------|-------------|
| EXPLAIN_CODE | Explain what code does |
| REFACTOR | Improve code structure |
| GENERATE_TESTS | Create unit tests |
| FIX_BUG | Diagnose and fix a bug |
| IMPLEMENT_FEATURE | Add new functionality |
| DOCUMENT | Add documentation |
| OPTIMIZE | Improve performance |
| REVIEW | Review for issues |
| ANSWER_QUESTION | Answer coding question |
| CUSTOM | Custom task |

---

## Components Added

### Models (`AgentTaskModels.kt`)

| Type | Description |
|------|-------------|
| `AgentTask` | Task with context and constraints |
| `TaskType` | Task type enum |
| `TaskContext` | Execution context |
| `TaskConstraints` | Execution limits |
| `TaskStatus` | Lifecycle status |
| `TaskStep` | Execution step |
| `TaskResult` | Completion result |
| `TaskEvent` | Progress event |

### Tools (`AgentTools.kt`)

| Type | Description |
|------|-------------|
| `AgentTool` | Tool definition |
| `ToolParameters` | Parameter schema |
| `ToolResult` | Execution result |
| `BuiltInTools` | 8 built-in tools |

### Executor (`AgentExecutor.kt`)

| Feature | Description |
|---------|-------------|
| Task Execution | Run tasks with LLM |
| Tool Coordination | Execute tool calls |
| Progress Tracking | Emit events |
| History | Track completed tasks |

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/agent/tasks/AgentTaskModels.kt`
- `src/main/kotlin/com/sidekick/agent/tools/AgentTools.kt`
- `src/main/kotlin/com/sidekick/agent/AgentExecutor.kt`
- `src/test/kotlin/com/sidekick/agent/tasks/AgentTaskModelsTest.kt`
- `src/test/kotlin/com/sidekick/agent/tools/AgentToolsTest.kt`
- `src/test/kotlin/com/sidekick/agent/AgentExecutorTest.kt`

---

## Test Coverage

| Test Class | Tests | Coverage |
|------------|-------|----------|
| `AgentTaskModelsTest` | 35+ | All models, lifecycle |
| `AgentToolsTest` | 25+ | Tools, handlers |
| `AgentExecutorTest` | 20+ | Execution logic |

---

## API Reference

### Create Task
```kotlin
val task = AgentTask.simple(
    type = TaskType.REFACTOR,
    description = "Refactor function",
    userInstructions = "Clean up this code",
    projectPath = "/project",
    activeFile = "/project/main.kt"
)
```

### Execute Task
```kotlin
val executor = AgentExecutor.getInstance(project)
val result = executor.executeTask(task)
```

### Listen for Events
```kotlin
executor.addListener { event ->
    when (event) {
        is TaskEvent.StepCompleted -> println(event.step.toolName)
        is TaskEvent.TaskCompleted -> println(event.result.summary)
    }
}
```

---

## Verification

```bash
./gradlew test --tests "com.sidekick.agent.*"
# All tests passing
```
