# Sidekick v0.8.4 Changelog ‚Äî Code Understanding

> **Release Date:** 2026-02-06  
> **Phase:** LLM Integration (v0.8.x)

---

## Summary

This release adds **Code Understanding** ‚Äî AST analysis, semantic search, and embeddings.

---

## New Features

### üîç Semantic Code Search

- **Vector Embeddings:** Embed code chunks for similarity search
- **Cosine Similarity:** Find semantically similar code
- **Multi-Strategy Search:** Combine semantic, keyword, and symbol search

### üìä Code Indexing

- **Chunking:** Split code into overlapping chunks (50 lines, 10 overlap)
- **Symbol Extraction:** Extract classes, methods, properties from AST
- **Language Detection:** Auto-detect 10+ programming languages

### üéØ Symbol Navigation

- **Symbol Lookup:** Find symbols by name
- **Reference Tracking:** Track where symbols are used
- **File Outline:** Get structured view of file contents

---

## Components Added

### Models (`CodeIndexModels.kt`)

| Type | Description |
|------|-------------|
| `CodeChunk` | Indexed code segment with embedding |
| `ChunkType` | Chunk category (file, class, method, etc.) |
| `SymbolInfo` | Symbol from AST with references |
| `SymbolKind` | Symbol category (class, method, property, etc.) |
| `SymbolReference` | Usage location |
| `CodeSearchResult` | Search match with score |
| `MatchType` | Search strategy (semantic, keyword, symbol) |
| `SearchQuery` | Search configuration |
| `IndexStats` | Index statistics |
| `EmbeddingUtils` | Vector math utilities |
| `IndexEvent` | Indexing progress events |

### Service (`CodeIndexService.kt`)

| Feature | Description |
|---------|-------------|
| `indexProject()` | Index entire project |
| `indexFile()` | Index single file |
| `semanticSearch()` | Vector similarity search |
| `keywordSearch()` | Text pattern search |
| `search()` | Combined multi-strategy search |
| `findSymbol()` | Lookup symbol by name |
| `getFileSymbols()` | Get symbols in file |
| `getStats()` | Index statistics |

---

## Search Types

| Type | Description | Score Range |
|------|-------------|-------------|
| SEMANTIC | Vector similarity | 0.0 - 1.0 |
| KEYWORD | Text match count | 0.0+ |
| SYMBOL | Exact symbol match | 1.0 |
| FUZZY | Approximate match | 0.0 - 1.0 |
| REGEX | Pattern match | 0.0 - 1.0 |

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/agent/index/CodeIndexModels.kt`
- `src/main/kotlin/com/sidekick/agent/index/CodeIndexService.kt`
- `src/test/kotlin/com/sidekick/agent/index/CodeIndexModelsTest.kt`
- `src/test/kotlin/com/sidekick/agent/index/CodeIndexServiceTest.kt`

---

## Test Coverage

| Test Class | Tests | Coverage |
|------------|-------|----------|
| `CodeIndexModelsTest` | 40+ | All models, embeddings |
| `CodeIndexServiceTest` | 25+ | Search, indexing logic |

---

## API Reference

### Index Project
```kotlin
val indexService = CodeIndexService.getInstance(project)
indexService.indexProject(generateEmbeddings = true)
```

### Semantic Search
```kotlin
val results = indexService.semanticSearch("authentication logic", limit = 10)
```

### Combined Search
```kotlin
val query = SearchQuery(
    query = "user validation",
    types = setOf(ChunkType.METHOD),
    matchTypes = setOf(MatchType.SEMANTIC, MatchType.KEYWORD)
)
val results = indexService.search(query)
```

### Symbol Lookup
```kotlin
val symbol = indexService.findSymbol("UserService")
val fileSymbols = indexService.getFileSymbols("/src/main.kt")
```

---

## Verification

```bash
./gradlew test --tests "com.sidekick.agent.index.*"
# All tests passing
```
