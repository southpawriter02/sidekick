# Sidekick v0.9.2 Changelog â€” Specialist Agents

> **Release Date:** 2026-02-06  
> **Phase:** Advanced Agent Capabilities (v0.9.x)

---

## Summary

This release adds **Specialist Agents** â€” role-based sub-agents with focused expertise.

---

## New Features

### ðŸŽ­ Agent Roles (8)

| Role | Icon | Focus |
|------|------|-------|
| **Architect** | ðŸ—ï¸ | System design, patterns, module boundaries |
| **Implementer** | âš™ï¸ | Writing clean, idiomatic code |
| **Reviewer** | ðŸ‘ï¸ | Code quality, correctness, best practices |
| **Tester** | ðŸ§ª | Tests, coverage, edge cases |
| **Documenter** | ðŸ“ | Documentation, comments, examples |
| **Debugger** | ðŸ› | Root cause analysis, minimal fixes |
| **Optimizer** | âš¡ | Performance, efficiency, algorithms |
| **Security** | ðŸ”’ | Vulnerabilities, auth, secure coding |

### ðŸ”§ Capabilities (11)

| Capability | Description |
|------------|-------------|
| `READ_CODE` | Read source files |
| `WRITE_CODE` | Modify existing files |
| `CREATE_FILES` | Create new files |
| `DELETE_FILES` | Remove files |
| `RUN_TESTS` | Execute tests |
| `ANALYZE_AST` | Parse code structure |
| `SEARCH_CODEBASE` | Search files and symbols |
| `EXECUTE_COMMANDS` | Run shell commands |
| `MODIFY_CONFIG` | Change config files |
| `ACCESS_MEMORY` | Access conversation memory |
| `DELEGATE_TASKS` | Assign to other agents |

### ðŸ“‹ Response Features

- **Confidence scoring** â€” 0-1 confidence in response
- **Suggested actions** â€” Follow-up recommendations with priority
- **Artifacts** â€” Code, documentation, reviews, decisions
- **Delegation** â€” Suggest handoff to other specialists
- **Review feedback** â€” Structured review items with severity

---

## Components Added

### Models (`SpecialistModels.kt`)

| Type | Description |
|------|-------------|
| `SpecialistAgent` | Agent with role, prompt, capabilities |
| `AgentRole` | 8 specialist roles |
| `Capability` | 11 agent capabilities |
| `SpecialistRequest` | Request with prompt, context, files |
| `AgentResponse` | Response with content, confidence, actions |
| `SuggestedAction` | Follow-up action recommendation |
| `ResponseArtifact` | Generated code, docs, reviews |
| `ReviewFeedback` | Structured review with items |
| `SpecialistEvent` | Lifecycle events |

### Prompts (`SpecialistPrompts.kt`)

| Method | Description |
|--------|-------------|
| `forRole()` | Get prompt for role |
| `all()` | Get all prompts |
| `withProjectContext()` | Add project context |
| `withCollaboration()` | Add collaborator info |
| `forTask()` | Add task-specific focus |

### Service (`SpecialistService.kt`)

| Method | Description |
|--------|-------------|
| `getSpecialist()` | Get agent by role |
| `invoke()` | Invoke with prompt |
| `invokeChain()` | Sequential invocation |
| `invokeParallel()` | Parallel invocation |
| `delegate()` | Delegate between agents |
| `suggestSpecialist()` | Recommend agent for task |
| `implementReviewLoop()` | Implement-review cycle |

---

## Files Changed

### New Files
- `src/main/kotlin/com/sidekick/agent/specialists/SpecialistModels.kt`
- `src/main/kotlin/com/sidekick/agent/specialists/SpecialistPrompts.kt`
- `src/main/kotlin/com/sidekick/agent/specialists/SpecialistService.kt`
- `src/test/kotlin/com/sidekick/agent/specialists/SpecialistModelsTest.kt`
- `src/test/kotlin/com/sidekick/agent/specialists/SpecialistPromptsTest.kt`
- `src/test/kotlin/com/sidekick/agent/specialists/SpecialistServiceTest.kt`

---

## Test Coverage

| Test Class | Tests | Coverage |
|------------|-------|----------|
| `SpecialistModelsTest` | 25+ | Agents, roles, capabilities, responses |
| `SpecialistPromptsTest` | 15+ | Prompts, retrieval, customization |
| `SpecialistServiceTest` | 25+ | Invocation, delegation, events |

---

## API Reference

### Invoke a Specialist
```kotlin
val service = SpecialistService(project.basePath ?: "")

// Simple invocation
val response = service.invoke(
    role = AgentRole.ARCHITECT,
    prompt = "Design a caching layer for the API",
    context = existingCode
)

println("Confidence: ${response.confidence}")
response.suggestedActions.forEach { action ->
    println("${action.priority}: ${action.description}")
}
```

### Chain Multiple Specialists
```kotlin
// Sequential: Architect â†’ Implementer â†’ Tester
val responses = service.invokeChain(
    roles = listOf(AgentRole.ARCHITECT, AgentRole.IMPLEMENTER, AgentRole.TESTER),
    initialPrompt = "Add user authentication feature"
)

responses.forEach { response ->
    println("${response.role.displayName}: ${response.content.take(100)}...")
}
```

### Implement-Review Loop
```kotlin
// Automatically iterate until approved
val result = service.implementReviewLoop(
    prompt = "Implement a binary search function",
    maxIterations = 3
)

if (result.approved) {
    println("Approved after ${result.iterations} iterations")
    println(result.finalContent)
} else {
    println("Not approved, feedback: ${result.feedback?.overallAssessment}")
}
```

### Suggest Specialist for Task
```kotlin
val role = service.suggestSpecialist("fix the null pointer exception in login")
// Returns: AgentRole.DEBUGGER

val specialist = service.getSpecialist(role)
println("${specialist.displayName} will handle this")
```

### Custom Specialist
```kotlin
val custom = service.createCustomSpecialist(
    role = AgentRole.IMPLEMENTER,
    customPrompt = "You are a Kotlin expert focused on coroutines...",
    additionalCapabilities = setOf(Capability.EXECUTE_COMMANDS),
    temperature = 0.3f
)
```

---

## Role Capabilities Matrix

| Role | Read | Write | Test | AST | Search | Commands | Delegate |
|------|------|-------|------|-----|--------|----------|----------|
| Architect | âœ… | âŒ | âŒ | âœ… | âœ… | âŒ | âœ… |
| Implementer | âœ… | âœ… | âŒ | âŒ | âœ… | âŒ | âŒ |
| Reviewer | âœ… | âŒ | âŒ | âœ… | âœ… | âŒ | âŒ |
| Tester | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ | âŒ |
| Documenter | âœ… | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| Debugger | âœ… | âŒ | âŒ | âœ… | âœ… | âœ… | âŒ |
| Optimizer | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ |
| Security | âœ… | âŒ | âŒ | âœ… | âœ… | âŒ | âŒ |

---

## Delegation Flow

```mermaid
graph LR
    A[User Request] --> B{Suggest Specialist}
    B --> C[Architect]
    B --> D[Implementer]
    B --> E[Debugger]
    
    C -->|Delegate| D
    D -->|Request Review| F[Reviewer]
    F -->|Changes Requested| D
    F -->|Approved| G[Complete]
    
    E -->|Delegate Fix| D
```

---

## Verification

```bash
./gradlew test --tests "com.sidekick.agent.specialists.*"
# All tests passing
```
