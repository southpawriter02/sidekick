# v1.2.0 — Per-Task File Access Scoping

**Released:** 2026-02-07

## Summary

Every agent task now runs inside a file-access sandbox scoped to the project
root. The agent can only read/write files within the project, and globally
restricted system paths (`/etc`, `/var`, `~/.ssh`, etc.) are blocked regardless
of scope. Large-file warnings are emitted for reads over a configurable
threshold.

## New Features

### Task-Scoped File Access

- `TaskFileScope` defines read/write boundaries per task (default: project root)
- `TaskScopedFileAccess` validates every file read, write, and command working
  directory against the scope before execution
- `SecurityConfig` provides global restricted-path defaults with override support
- Large-file warnings for reads exceeding configurable byte threshold
- Canonical path resolution prevents symlink-based bypass

### Agent Integration

- `AgentExecutor.executeTask()` auto-scopes file access to the project root
- `TaskConstraints.fileScope` allows per-task override of the default scope
- All `write_file`, `edit_file`, and `run_command` tool calls are validated

## Files Changed

| File | Change |
|---|---|
| `TaskFileScope.kt` | **NEW** — Scope definition with read/write path sets |
| `TaskScopedFileAccess.kt` | **NEW** — Validation engine with canonical path handling |
| `SecurityConfig.kt` | **NEW** — Global restricted paths and large-file thresholds |
| `AgentExecutor.kt` | Integrated scoped access into `executeToolCall()` |
| `AgentTaskModels.kt` | Added `fileScope` to `TaskConstraints` |
| `TaskFileScopeTest.kt` | **NEW** — 15 unit tests for scope creation and queries |
| `TaskScopedFileAccessTest.kt` | **NEW** — 20 unit tests for validation logic |
